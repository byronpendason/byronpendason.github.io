<form>
    <label for="engInput" style="width:100%;">Text to convert:</label>
    <br />
    <textarea id="engInput" name="engInput" type="text" style="width:100%;height:40%;"></textarea>
    <br />
    <button type="button" id="convertBtn" name="convertBtn" style="width:49%;">Convert!</button>
    <button type="button" id="clearBtn" name="clearBtn" style="width:49%">Clear</button>
</form>
<textarea readonly hidden id="runeOutput" style="width:100%;font-size:large;height:50%;background-color:black;color:white"></textarea>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="https://rawcdn.githack.com/zenorocha/clipboard.js/v2.0.8/dist/clipboard.min.js"></script>
<script type="text/javascript">
    var w = $(window).width();
    		$('body').css('width', w);
    		function isVowel(x) {
        		if ("aeiou".search(x) > -1) {
          		return true;
        		} else {
          		return false;
          	}
    		}
    		
    		$(document).ready(function() {
    			$("#clearBtn").bind("click", function() {
        			$("#engInput").val("");
        			$("#runeOutput").hide();
    			});
    			$("#convertBtn").bind("click", function() {
    				const runes = ["ᚦ", "ᛝ", "ᛟ", "ᛠ", "ᛇ", "ᛥ", "ᛣᚹ", "ᚫ", "ᛒ", "ᚳ", "ᛞ", "ᛖ", "ᚠ", "ᚷ", "ᚻ", "ᛁ", "ᛄ", "ᛣ", "ᛚ", "ᛗ", "ᚾ", "ᚩ", "ᛈ", "ᛣ", "ᚱ", "ᛋ", "ᛏ", "ᚢ", "ᚢ", "ᚹ", "ᛉ", "ᚣ", "ᚴ"];
    				const letters = ["th", "ng", "ee", "ea", "eo", "st", "qu", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
    				var txt = $("#engInput").val();
    				txt = txt.trim();
    				if (txt.search(/[\u16a0-\u16ed]/)>-1) {
    					for (var i = 0; i < letters.length; i++) {
    						var reg = new RegExp(runes[i], "gim");
    						txt = txt.replace(reg, letters[i]);
    					}
    					txt = txt.replace(/᛫/gmi, " ");
    					txt = txt.replace(/᛬/gmi, ". ");
    					txt = txt.replace(/᛭/gmi, ", ");
    					txt = txt.replace(/u([aeiou])/gmi, "v$1");
    					txt = txt.replace(/([aeiou])u/gmi, "$1v");
    					txt = txt.replace(/yov/gmi, "you");
    					txt = txt.replace(/ouer/gmi, "over");
    					txt = txt.replace(/([aeo])v([^aeiouy])/gmi, "$1u$2");
    					txt = txt.replace(/([b-df-hj-np-tv-z])va([b-df-hj-np-tv-z])/gmi, "$1ua$2");
    					txt = txt.replace(/qv/gmi, "qu");
    					txt = txt.replace(/([b-df-hj-np-tv-z])vi([^o])/gmi, "$1ui$2");
    					txt = txt.trim();
    					capList = txt.match(/^[a-z]|[\.\!\?]\s+[a-z]|\n[a-z]/g);
    					for(i = 0; i < capList.length; i++) {
        					txt = txt.replace(capList[i], capList[i].toUpperCase());
        					txt = txt.replace(/(Are|Did|Who|What|When|Where|Why)([a-z0-9\s\,]*)\./gm, "$1$2?");
    					}
    				} else {
    					txt = txt.normalize("NFD");
    					txt = txt.replace(/[^a-zA-Z0-9\.\,\s\!\?\(\)\{\}\[\]\-\u16A0-\u16edþæðđ]/gmi, "");
    					txt = txt.replace(/[þðđ]/gmi, "th");
        				txt = txt.replace(/æ/gmi, "a");
        				txt = txt.replace(/aa/gmi, "a");
    					txt = txt.replace(/oo/gmi, "o");
    					for (var i = 0; i < letters.length; i++) {
    						var reg = new RegExp(letters[i], "gim");
    						txt = txt.replace(reg, runes[i]);
    					}
    					txt = txt.replace(/\ /gmi, "᛫");
    					txt = txt.replace(/\,\u16eb*/gm, "᛭");
    					txt = txt.replace(/[\.\?\!\;]\u16eb*/gmi, "᛬");
    				}
    				$("#runeOutput").val(txt);
    				$("#runeOutput").show();
    			});
    			$("#runeOutput").bind("click", function()  {
    					var txt = $("#runeOutput").val();
    					//txt.setSelectionRange(0, 99999);
    					navigator.clipboard.writeText(txt)
    					.then(() => alert("Copied to clipboard:\n"+txt))
    					.catch(() => $("#runeOutput".select()));
    				});
    		});
</script>
